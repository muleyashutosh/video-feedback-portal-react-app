(this["webpackJsonpvideo-feedback-portal"]=this["webpackJsonpvideo-feedback-portal"]||[]).push([[0],{68:function(e,t,n){},69:function(e,t,n){},81:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(9),i=n.n(r),s=(n(68),n(69),n(111)),o=n(113),l=n(114),d=n(129),j=n(128),u=n(25),b=n(4),p=Object(j.a)((function(e){return{root:{flexGrow:1},spread:{justifyContent:"space-between"},title:{flexGrow:1},white:{color:"white",textDecoration:"none"}}})),f=function(){var e=p();return Object(b.jsx)(s.a,{position:"static",children:Object(b.jsxs)(o.a,{className:e.root,children:[Object(b.jsx)(l.a,{variant:"h6",className:e.title,children:Object(b.jsx)(u.b,{className:e.white,to:"/video-feedback-portal-react-app/",children:"Feedback"})}),Object(b.jsx)(d.a,{color:"inherit",variant:"outlined",children:Object(b.jsx)(u.b,{className:e.white,to:"/video-feedback-portal-react-app/admin",children:"Admin"})})]})})},m=n(15),h=n.n(m),O=n(21),x=n(11),v=n(56),g=n.n(v),w="https://video-feedback-portal-server.cleverapps.io",y=n(19),k=n.n(y),C=(n(44),Object(j.a)((function(e){return{root:{flexGrow:1},video:{margin:"10px",width:"50%"},buttonContainer:{display:"grid",gap:"10px",gridTemplateColumns:"1fr 1fr",width:"50%",padding:"20px"},center:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}}}))),N=function(){var e=Object(a.useRef)(null),t=Object(a.useRef)(null),n=Object(a.useState)(!1),c=Object(x.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)([]),o=Object(x.a)(s,2),l=o[0],j=o[1],u=Object(a.useState)(""),p=Object(x.a)(u,2),f=p[0],m=p[1],v=Object(a.useState)(!0),y=Object(x.a)(v,2),N=y[0],S=y[1],D=Object(a.useState)(""),F=Object(x.a)(D,2),I=F[0],L=F[1],R=C(),P=function(e){var t=e.data;t.size>0&&j((function(e){return e.concat(t)}))};Object(a.useEffect)((function(){Object(O.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://geolocation-db.com/json/");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,L(n.IPv4);case 7:case"end":return e.stop()}}),e)})))()}),[I]);var T=function(){var e=Object(O.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.a.start(),!l.length||!f){e.next=13;break}return t=new Blob(l,{type:"video/webm"}),(n=new FormData).append("video",t),n.append("ip",I),n.append("timestamp",(new Date).toLocaleString()),n.append("thumbnail",f),e.next=10,fetch("".concat(w,"/api/storeVideo"),{method:"post",body:n});case 10:j([]),m(""),S(!0);case 13:k.a.done();case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:R.center,children:[Object(b.jsx)(g.a,{className:R.video,audio:!0,ref:e,mirrored:!0}),Object(b.jsxs)("div",{className:R.buttonContainer,children:[r?Object(b.jsx)(d.a,{color:"secondary",variant:"contained",onClick:function(){t.current.stop(),i(!1),S(!1)},children:"Stop"}):Object(b.jsx)(d.a,{color:"primary",variant:"contained",onClick:function(){i(!0),S(!0),t.current=new MediaRecorder(e.current.stream,{mimeType:"video/webm"}),t.current.addEventListener("dataavailable",P),t.current.start(),m(e.current.getScreenshot())},children:"Capture"}),Object(b.jsx)(d.a,{color:"primary",variant:"contained",disabled:N,onClick:T,children:"Submit"})]})]})},S=n(123),D=n(124),F=n(127),I=n(125),L=n(115),R=n(59),P=n(116),T=n(117),E=n(118),B=n(119),M=n(120),U=n(121),A=n(122);k.a.configure({showSpinner:!1});var G=Object(j.a)((function(e){return{table:{width:"100%"},container:{width:"95%",display:"flex",justifyContent:"flex-start",marginTop:e.spacing(3),marginRight:"auto",marginLeft:"auto",flexDirection:"column",overflowY:"hidden"},emptyMsg:{margin:e.spacing(2)},pointer:{cursor:"pointer"},loader:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),J=function(){var e=Object(a.useState)([]),t=Object(x.a)(e,2),n=t[0],c=t[1],r=G(),i=Object(a.useState)(!0),s=Object(x.a)(i,2),o=s[0],l=s[1];Object(a.useEffect)((function(){return Object(O.a)(h.a.mark((function e(){var t,n,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(w,"/api/getEntries"));case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,a=n.data,c(a),l(!1);case 9:case"end":return e.stop()}}),e)})))()}),[c]);var d=n.map((function(e,t){var n=e.filename;return{id:t+1,thumbnail:e.image,timestamp:e.timestamp,ip:e.ip,filename:n}})),j=function(){var e=Object(O.a)(h.a.mark((function e(t){var n,a,c,r,i,s,o;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.a.start(),e.next=3,fetch("".concat(w,"/video/").concat(t));case 3:return n=e.sent,e.next=6,n.json();case 6:return a=e.sent,c=a.video,e.next=10,fetch("data:video/webp;base64,".concat(c));case 10:return r=e.sent,e.next=13,r.blob();case 13:i=e.sent,s=document.createElement("a"),o=URL.createObjectURL(i),s.href=o,s.style.display="none",s.download="video.webm",document.body.appendChild(s),s.click(),URL.revokeObjectURL(o),document.body.removeChild(s),k.a.done();case 24:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(a.Fragment,{children:Object(b.jsxs)(L.a,{className:r.container,component:R.a,elevation:3,children:[o?Object(b.jsx)(P.a,{className:r.loader}):null,Object(b.jsxs)(T.a,{className:r.table,"aria-label":"simple table",loading:"true",children:[Object(b.jsx)(E.a,{children:Object(b.jsxs)(B.a,{children:[Object(b.jsx)(M.a,{children:"ID"}),Object(b.jsx)(M.a,{align:"center",children:"Video"}),Object(b.jsx)(M.a,{align:"center",children:"TimeStamp"}),Object(b.jsx)(M.a,{align:"center",children:"IP Address"}),Object(b.jsx)(M.a,{align:"center",children:"Download"})]})}),Object(b.jsx)(U.a,{children:0!==d.length||o?d.map((function(e,t){var n=e.filename,a=e.thumbnail,c=e.timestamp,i=e.ip;return Object(b.jsxs)(B.a,{children:[Object(b.jsx)(M.a,{component:"th",scope:"row",children:t+1}),Object(b.jsx)(M.a,{align:"center",children:Object(b.jsx)(u.b,{to:"/video-feedback-portal-react-app/video/".concat(n),target:"_blank",rel:"noopener noreferrer",children:Object(b.jsx)("img",{src:a,alt:"",style:{width:100,height:80}})})}),Object(b.jsx)(M.a,{align:"center",children:c}),Object(b.jsx)(M.a,{align:"center",children:i}),Object(b.jsx)(M.a,{align:"center",children:Object(b.jsx)(A.a,{className:r.pointer,onClick:function(){return j(n)}})})]},t+1)})):Object(b.jsx)(B.a,{className:r.emptyMsg,children:Object(b.jsx)(M.a,{children:"No Records to show yet"})})})]})]})})},q=Object(j.a)((function(e){return{root:{flexGrow:1,width:"fit-content",margin:"20px auto"},verticalAlign:{display:"flex",flexDirection:"column",alignItems:"center"},inputfield:{margin:e.spacing(3),marginBottom:e.spacing(.5)},button:{margin:e.spacing(2)},errMsg:{color:"#ea4335",margin:e.spacing(2)},signoutButton:{margin:e.spacing(2)},buttonContainer:{display:"flex",justifyContent:"flex-end"}}})),z=function(){var e=q(),t=Object(a.useState)(!1),n=Object(x.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)(""),s=Object(x.a)(i,2),o=s[0],j=s[1],u=Object(a.useState)(""),p=Object(x.a)(u,2),f=p[0],m=p[1],v=Object(a.useState)(!1),g=Object(x.a)(v,2),y=g[0],C=g[1],N=function(){var e=Object(O.a)(h.a.mark((function e(t){var n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k.a.start(),t.preventDefault(),e.next=4,fetch("".concat(w,"/api/signin"),{headers:{"Content-Type":"application/json"},method:"post",body:JSON.stringify({username:o,password:f})});case 4:return n=e.sent,e.next=7,n.json();case 7:"OK"===e.sent.status?r(!0):C(!0),k.a.done();case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)(a.Fragment,{children:c?Object(b.jsxs)(a.Fragment,{children:[Object(b.jsx)("div",{className:e.buttonContainer,children:Object(b.jsx)(d.a,{onClick:function(){k.a.start(),r(!1),C(!1),k.a.done()},variant:"contained",color:"secondary",className:e.signoutButton,children:"Signout"})}),Object(b.jsx)(J,{})]}):Object(b.jsxs)(S.a,{className:e.root,elevation:2,children:[Object(b.jsxs)(D.a,{className:e.verticalAlign,children:[Object(b.jsx)(F.a,{variant:"filled",error:y,onChange:function(e){var t=e.target;j(t.value)},className:e.inputfield,id:"username",label:"Username",required:!0}),Object(b.jsx)(F.a,{variant:"filled",type:"password",error:y,onChange:function(e){var t=e.target;m(t.value)},className:e.inputfield,id:"password",label:"Password",required:!0}),y?Object(b.jsx)(l.a,{variant:"body1",className:e.errMsg,children:"Invalid Credentials"}):null]}),Object(b.jsx)(I.a,{children:Object(b.jsx)(d.a,{onClick:N,color:"primary",variant:"contained",className:e.button,size:"medium",children:"Submit"})})]})})},V=n(13),K=Object(j.a)((function(e){return{videoParent:{display:"flex",justifyContent:"center",alignItems:"center",height:"100%"}}})),Y=function(){var e=K(),t=Object(V.f)().filename,n=Object(a.useState)(""),c=Object(x.a)(n,2),r=c[0],i=c[1];return Object(a.useEffect)((function(){Object(O.a)(h.a.mark((function e(){var n,a,c;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(w,"/video/").concat(t));case 2:return n=e.sent,e.next=5,n.json();case 5:a=e.sent,c=a.video,i("data:video/webm;base64,".concat(c));case 8:case"end":return e.stop()}}),e)})))()})),Object(b.jsx)("div",{className:e.videoParent,children:Object(b.jsx)("video",{autoPlay:!0,controls:!0,src:r,loading:"true"})})},_=function(){return Object(b.jsx)(u.a,{children:Object(b.jsxs)(a.Fragment,{children:[Object(b.jsx)(f,{}),Object(b.jsxs)(V.c,{children:[Object(b.jsx)(V.a,{exact:!0,path:"/video-feedback-portal-react-app/",children:Object(b.jsx)(N,{})}),Object(b.jsx)(V.a,{path:"/video-feedback-portal-react-app/admin",children:Object(b.jsx)(z,{})}),Object(b.jsx)(V.a,{path:"/video-feedback-portal-react-app/video/:filename",children:Object(b.jsx)(Y,{})})]})]})})},H=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,131)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),c(e),r(e),i(e)}))},Q=n(57),W=n(130),X=n(126),Z=Object(Q.a)({palette:{primary:{main:"#1769aa"},secondary:{main:"#ab003c"}}});Z=Object(W.a)(Z),i.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(X.a,{theme:Z,children:Object(b.jsx)(_,{})})}),document.getElementById("root")),H()}},[[81,1,2]]]);
//# sourceMappingURL=main.e23dded1.chunk.js.map